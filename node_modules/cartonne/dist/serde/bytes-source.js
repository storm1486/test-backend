import { UnexpectedEOFError } from "./unexpected-eof-error.js";
export class BytesSource {
    bytes;
    #position = 0;
    constructor(bytes) {
        this.bytes = bytes;
    }
    get position() {
        return this.#position;
    }
    upTo(length) {
        const result = this.bytes.subarray(this.#position, this.#position + Math.min(length, this.bytes.length - this.#position));
        this.#position += result.length;
        return result;
    }
    move(delta) {
        this.#position += delta;
    }
    exactly(length) {
        if (this.#position + length > this.bytes.length) {
            throw new UnexpectedEOFError();
        }
        const result = this.bytes.subarray(this.#position, this.#position + length);
        this.#position += length;
        return result;
    }
}
