export class StartupError extends Error {
}
export function isConnectionAborted(error) {
    return 'code' in error && error.code === 'ECONNABORTED';
}
export function errorHandler(logger) {
    return (err, req, res, next) => {
        res.locals.error = err;
        if (isConnectionAborted(err)) {
            logger.err(`An HTTP client abruptly closed a request: ${err.message}`);
        }
        else {
            logger.err(err);
        }
        if (res.headersSent) {
            return next(err);
        }
        if (res.statusCode < 300) {
            res.status(500);
        }
        res.send({ error: err.message });
    };
}
//# sourceMappingURL=error-handler.js.map