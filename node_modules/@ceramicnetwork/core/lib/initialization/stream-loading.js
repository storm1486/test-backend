import { StreamUpdater } from '../stream-loading/stream-updater.js';
import { StreamLoader } from '../stream-loading/stream-loader.js';
import { AnchorTimestampExtractor } from '../stream-loading/anchor-timestamp-extractor.js';
import { TipFetcher } from '../stream-loading/tip-fetcher.js';
import { LogSyncer } from '../stream-loading/log-syncer.js';
import { StateManipulator } from '../stream-loading/state-manipulator.js';
export function makeStreamLoaderAndUpdater(logger, dispatcher, anchorValidator, streamHandlers, context) {
    const anchorTimestampExtractor = new AnchorTimestampExtractor(logger, dispatcher, anchorValidator);
    const tipFetcher = new TipFetcher(dispatcher.messageBus);
    const logSyncer = new LogSyncer(dispatcher);
    const stateManipulator = new StateManipulator(logger, streamHandlers, context, logSyncer);
    const streamLoader = new StreamLoader(logger, tipFetcher, logSyncer, anchorTimestampExtractor, stateManipulator);
    const streamUpdater = new StreamUpdater(logger, dispatcher, logSyncer, anchorTimestampExtractor, stateManipulator);
    return [streamLoader, streamUpdater];
}
//# sourceMappingURL=stream-loading.js.map