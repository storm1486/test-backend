import { Node } from './merkle-elements.js';
export class IpfsMerge {
    constructor(ipfsService, logger) {
        this.ipfsService = ipfsService;
        this.logger = logger;
    }
    async merge(left, right = null, metadata = null) {
        const merged = [left.data.cid, right?.data?.cid || null];
        if (metadata) {
            const metadataCid = await this.ipfsService.storeRecord(metadata);
            merged.push(metadataCid);
        }
        const mergedCid = await this.ipfsService.storeRecord(merged);
        this.logger.debug('Merkle node ' + mergedCid + ' created.');
        return new Node({ cid: mergedCid }, left, right);
    }
}
//# sourceMappingURL=ipfs-merge.js.map